<!DOCTYPE html>
<hmtl>

    <head>

        <title>CAMPO MINATO</title>

        <style>

            div
            {
                text-align: center;
                font-size: large;
            }

            /*parte alta dello schermo*/
            .grid-container-header
            {
                display: grid;
                grid-template-columns: auto auto auto;
            }

            /*elementi della parte alta*/
            .grid-header-item
            {
                border: 1px solid rgba(0, 0, 0, 0.8);
                text-align: center;
                background-color: red;
                width: auto;
            }


            /*griglia delle celle grigie*/
            .grid-container-cells
            {
                display: grid;
                grid-template-columns: auto auto auto auto auto auto auto auto auto auto;
                width: 600px;
            }

            /*celle coperte*/
            .close-cells
            {
                background-color: gray;
                border: 1px solid rgba(0, 0, 0, 0.8);
                width: 60px;
                height: 60px;
                text-align: center;
                top: 50%;
            }

            /*celle scoperte*/
            .open-cells
            {
                background-color: white;
                border: 1px solid rgba(0, 0, 0, 0.8);
                width: 60px;
                height: 60px;
            }

            /*celle con la bomba*/
            /*
            .bomb-cells
            {
                background-color: red;
                border: 1px solid rgba(0, 0, 0, 0.8);
                width: 60px;
                height: 60px;
            }
            */
            /*le celle con la bomba hanno ora data-nomn = true ..... quelle senza hanno data-bomb = false*/

            /*celle con la bandiera*/
            .flag-cells
            {
                background-color: orange;
                border: 1px solid rgba(0, 0, 0, 0.8);
                width: 60px;
                height: 60px;
            }

        </style>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script type="text/javascript" src="CTimer.js"></script>
        <script type="text/javascript" src="CCampo.js"></script>

        
        <script type="text/javascript">

            /*
            const campo = new CCampo();
            //campo.creaCampo();

            const timer = new CTimer();
            let start = true;
            let timeout = 0;
            timeout = setInterval(tictoc, 1000);

            function startStop()
            {
                /*
                if(start == true)
                {
                    start = false;
                }
                else
                {
                    start = true;
                }
                */
               /*
                start = !start;

                if(start == true)
                {
                    timeout = setInterval(tictoc, 1000);
                }
                else
                {
                    clearTimeout(timeout);
                }
            }

            function tictoc()
            {
                document.getElementById("tempoRimasto").innerHTML = "TEMPO RIMASTO: " + timer.whatTimeIsIt();
            }
            */

            const campo = new CCampo();
            //campo.creaCampo();

            const timer = new CTimer();
            let start = true;
            let timeout = 0;
            timeout = setInterval(tictoc, 1000);

            function startStop()
            {
                /*
                if(start == true)
                {
                    start = false;
                }
                else
                {
                    start = true;
                }
                */
               
                start = !start;

                if(start == true)
                {
                    timeout = setInterval(tictoc, 1000);
                }
                else
                {
                    clearTimeout(timeout);
                }
            }

            function tictoc()
            {
                let x = campo.whatTimeIsIt();

                document.getElementById("tempoRimasto").innerHTML = "TEMPO RIMASTO: " + x;

                if(x == 0)
                {
                    clearTimeout(timeout);
                }
            }

        </script>

    </head>

    <body>

        LIVELLO DI DIFFICOLTA':
        <select id="difficolta" onchange="campo.setLevelOfDifficult();">

            <option value="" selected></option>
            <option value="1">facile</option>
            <option value="2">medio</option>
            <option value="3">difficile</option>

        </select>
        <br>

        <button onclick="startStop();">START/STOP TIMER</button>

        <div id="divHeader" class="grid-container-header">

            <div class="grid-header-item"><p style="font-size: medium;" id="numeroBombeNelCampo">NUMERO BOMBE NEL CAMPO:</p></div>
            <div class="grid-header-item" onclick="campo.reset();"><p style="font-size: medium;">RESET</p></div> 
            <div class="grid-header-item"><p style="font-size: medium;" id="tempoRimasto"></p></div>

        </div>

        <div id="divCells" class="grid-container-cells">

            

        </div>
        
    </body>

</html>
